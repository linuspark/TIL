# AVL 트리

AVL 트리는 가장 초기에 나온 균형잡힌 이진 탐색 트리(Balanced Binary Search Tree) 이다. AVL 이라는 이름을 이 트리를 만든 사람들의 이름을 따서 지어졌다.

AVL 트리의 각 노드에는 현재 노드를 루트로 했을 때 부분 트리(Sub-Tree)의 높이 정보가 들어있다. 왼쪽 부분 트리(Left sub-tree)의 높이와 오른쪽 부분 트리(Right sub-tree)의 높이가 1 이상 차이가 나지 않는 성질을 가지고 있으며 모든 노드에서 높이의 균형이 잡혔는지를 확인하여 균형을 잡는다.

```csharp
balance(n) = n.left.height - n.right.height;
-1 <= balance(n) <= 1
```

균형이 잡혀있기 때문에 N개의 원소를 가진 AVL 트리의 높이는 logN 이 되고 이진트리에서 특정 노드를 탐색하는 시간 복잡도는 트리의 높이와 같기 때문에 O(logN)이 된다.

# 삽입

노드의 삽입 시, 트리의 균형이 무너질 수 있다. 부분 트리의 높이가 +-2 가 차이가 나게 되면 균형이 무너졌다고 본다. 이 때에는 삽입 후 재귀스택을 빠져 나오면서 각 노드에서 균형을 확인하고 바로 잡는다. 일련의 회전 과정을 통해 균형을 바로잡고 스택을 빠져나온다.

# 삭제

AVL 트리에서 특정 노드를 삭제 하고자 할 때에는 특정 노드를 단말노드로 만들고 노드를 삭제한다. 예를들어 "삭제할 노드"가 단말노드가 아니라면 자신의 왼쪽 부분트리에서 최댓값을 갖는 노드, 혹은 오른쪽 부분트리에서 최솟값을 갖는 노드와 바꾼다. 이런 작업을 계속 해서 "삭제할 노드"를 단말 노드로 바꾼 다음 노드를 삭제한다.

노드를 삭제한 후에는 균형을 맞추기 위해 회전과정을 거친다.

---

참고. 게일 라크만 맥도웰. 코딩 인터뷰 완전분석 (이창현 옮김) 

참고. "AVL트리", Wikipedia