# Red-Black Tree

AVL 트리와 마찬가지로 자가 균형 이진 트리이다. 자료구조로써 복잡한 편에 속하지만 실 사용에 효율적이고 최악의 상황에서도 우수한 실행시간을 보이기 때문에 잘 사용된다.

레드-블랙 트리는 이진 탐색 트리(BST)를 기반으로 하며 아주 엄격하게 균형을 잡지는 않지만 탐색(Search), 삽입(Insert), 삭제(Delete) 등의 연산을 충분히 O(log N)의 시간에 수행할 수 있음을 보장한다.  

거의 번갈아 가면서 빨간색과 검은색 노드를 가지고 있어 레드-블랙 트리 라고 이름붙여졌으며 어떤 노드 부터 단말 노드(리프노드) 까지의 경로에 있는 모든 검은색 노드의 개수가 같다. 이렇게 되면 **꽤 균형잡힌** 트리가 된다.

![https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/Red-black_tree_example.svg/800px-Red-black_tree_example.svg.png](https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/Red-black_tree_example.svg/800px-Red-black_tree_example.svg.png)

# 특성(속성)

1. 노드는 **레드(Red)** 혹은 **블랙(Black)** 중의 한 가지 색을 가진다.
2. 루트노드는 블랙이다.
3. 모든 단말노드(NIL)는 블랙이다.
4. 레드 노드의 자식은 모두 블랙이다.(레드 노드의 자식으로 레드 노드가 있을 수 없다. / 블랙 노드는 블랙노드를 자식으로 가질 수 있다.)
5. 특정 노드부터 그에 속한 하위 리프 노드에 도달하는 모든 경로에는 같은 개수의 블랙 노드가 있다.

## 균형

위 레드-블랙 트리의 특성 때문에 레드-블랙 트리는 거의 균형이 잡혔다고(Roughly Balenced) 볼 수 있다. 루트 노드에서 가장 가까운 리프노드까지의 경로(A)와 가장 먼 리프노드 까지의 경로(B)가 항상 두 배 보다 적게 차이가 나기 때문이다. (2A > B)

4번째 속성에 따라 레드 노드는 한 경로에서 인접해서 있을 수 없다. 즉, 어떤 경로에서든 레드 노드는 경로상 노드의 절반 보다 적게 있어야 한다. 

5번째 속성에 따라 어떤 경로에서든 블랙 노드의 개수는 항상 같아야 한다. 

이 때 두 가지 특성에 따라 가장 가까운 리프 노드 까지의 거리(A)와 가장 먼 리프 노드 까지의 경로(B)를 생각해 본다면 가장 가까운 리프 노드 까지의 거리에는 블랙노드만 있는 경우가 되고 가장 먼 리프노드 까지의 거리는 최대한 많은 레드노드가 있는 경우, 즉 레드노드와 블랙 노드의 개수가 같은 경우이다.

리프노드 까지의 블랙 노드 개수를 b 라고 할 때,

1. (A) 의 경우 경로의 길이는 b 가 된다.
2. (B) 의 경우 경로의 길이는 2b 가 된다.

즉, 최악의 경우에도 경로의 차이가 2배 보다 많지 않게 된다. 이런 성질의 의미는 최악의 경우에도 검색, 삽입의 연산이 O(log N) 에 가능하다는 의미가 된다.

---

참고. 게일 라크만 맥도웰. 코딩 인터뷰 완전분석 (이창현 옮김) 

참고. "레드블랙트리", Wikipedia