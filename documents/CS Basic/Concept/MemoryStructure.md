# 프로그램 실행 순서

프로그램이 실행되는 과정은 다음과 같다.

1. 사용자가 OS에 프로그램의 실행을 요청한다.
2. OS는 보조기억장치(HDD/SSD 등) 에서 프로그램을 읽어 주기억장치(메모리:RAM)에 올린다.
3. CPU는 메모리에 올라온 프로그램 코드를 이용하여 메모리를 관리하고 명령문을 실행한다.

# 메모리 구조

프로그램이 메모리에 올라올 때에는 그림과 같은 구조로 메모리에 데이터가 할당된다.

코드 영역과 데이터 영역은 컴파일 시점에 그 크기가 결정이 되고 스택 영역과 힙 영역은 런 타임에 크기가 결정된다. 또한 일반적으로 사용할 수 있는 메모리 주소가 한정되어 있기 때문에 스택 영역과 힙 영역이 서로 오버플로우가 발생할 수 있다.

![http://tcpschool.com/lectures/img_c_memory_structure.png](http://tcpschool.com/lectures/img_c_memory_structure.png)

## 코드 영역

프로그램의 실행할 코드(기계어) 가 저장된 부분으로 텍스트 영역 이라고도 불린다. CPU 는 이 부분에 저장된 명령어를 차례로 실행하게 된다. 이미 컴파일 될 때 고정되어 작성된 부분으로 읽기만 가능하다.

## 데이터 영역

프로그램의 전역 변수, 정적(static)변수가 저장되는 공간.

프로그램이 시작 될 때 할당되며 프로그램이 종료될 때 해제가 된다.

## 힙 영역

힙(Heap)은 사용자가 직접 관리하는 메모리 영역으로 동적으로 할당되고 해제되는 데이터가 저장되는 공간이다. 

C#이나 JAVA등의 고수준 언어에서는 가비지 컬랙터(Garbage Collector)가 주로 메모리를 해제한다. 클래스, 객체 등이 이 부분에 할당되며 런타임에 그 크기가 계속해서 변한다. 메모리 주소의 낮은 주소부터 높은 주소 방향으로 할당된다.

메모리의 주소값을 통해서 참조되고 사용된다.

## 스택 영역

프로그램이 자동으로 사용하는 메모리 영역이다. 지역변수, 매개변수, 리턴 값 등 임시로 사용되고 사라지는 데이터를 저장하기 위해 존재하는 공간이다.

메모리의 높은 주소부터 시작하여 낮은 주소 방향으로 할당되며 주로 메모리의 마지막 번지에서 시작한다.

---

참고. [http://tcpschool.com/c/c_memory_structure](http://tcpschool.com/c/c_memory_structure)
